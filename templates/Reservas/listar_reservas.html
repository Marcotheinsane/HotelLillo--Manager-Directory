{% extends "base.html" %}
{% block title %}Lista de Reservas{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-50 py-10 px-6">
  <div class="max-w-6xl mx-auto bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden">
    
    <div class="flex justify-between items-center px-6 py-4 border-b bg-gray-100">
      <h2 class="text-2xl font-bold text-gray-800">Lista de Reservas</h2>
      <a href="{% url 'Hacer_Reservas' %}"
         class="bg-blue-600 hover:bg-blue-700 text-white font-semibold px-4 py-2 rounded-lg transition">
        + Nueva Reserva
      </a>
    </div>

    {% if messages %}
    <div class="p-4">
      {% for message in messages %}
      <div class="mb-3 p-3 rounded-lg {% if message.tags == 'success' %}bg-green-50 text-green-700 border-l-4 border-green-500{% elif message.tags == 'error' %}bg-red-50 text-red-700 border-l-4 border-red-500{% endif %}">
        {{ message }}
      </div>
      {% endfor %}
    </div>
    {% endif %}

    <div class="overflow-x-auto">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-100">
          <tr>
            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase">Huésped</th>
            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase">Tipo Habitación</th>
            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase">Habitación</th>
            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase">Check-in</th>
            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase">Check-out</th>
            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase">Estado</th>
            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase">Acciones</th>
          </tr>
        </thead>

        <tbody class="bg-white divide-y divide-gray-200">
          {% for reserva in reservas %}
          <tr class="hover:bg-gray-50 transition">
            <td class="px-6 py-4">{{ reserva.Huespedes.nombre }} {{ reserva.Huespedes.apellido }}</td>
            <td class="px-6 py-4">{{ reserva.Tipo_Habitacion }}</td>
            <td class="px-6 py-4">{{ reserva.Habitaciones.numero }}</td>
            <td class="px-6 py-4">{{ reserva.fecha_check_in|date:"d/m/Y" }}</td>
            <td class="px-6 py-4">{{ reserva.fecha_check_out|date:"d/m/Y" }}</td>
            <td class="px-6 py-4">
              <span class="px-3 py-1 rounded-full text-xs font-semibold
                {% if reserva.estado_reserva == 'pendiente' %} bg-yellow-100 text-yellow-800
                {% elif reserva.estado_reserva == 'confirmada' %} bg-green-100 text-green-800
                {% else %} bg-red-100 text-red-800 {% endif %}">
                {{ reserva.estado_reserva|title }}
              </span>
            </td>
            <td class="px-6 py-4">
              <a href="{% url 'reservas:editar_reserva' reserva.id %}"
                 class="text-blue-600 hover:text-blue-800 font-semibold">Editar</a>
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="7" class="text-center py-6 text-gray-500">
              No hay reservas registradas.
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
